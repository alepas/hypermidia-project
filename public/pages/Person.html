<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Wild Care</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

        <!--Carousel-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        
        <!--Style Sheet-->
        <link href="../assets/css/style.css" rel="stylesheet"/>

        <!--Icons Libraries-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <!--Font Link-->
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Top bar: this is our top landmark-->
        <header>
            <a href="../index.html">
                <img src="../assets/logo.png" class='nav-logo'>
            </a>
            <nav>
                <ul class='nav_links'>
                    <li><a href="./AboutUs.html">About Us</a></li>
                    <li class='dropdown'>
                        <a href="javascript:void(0)">Events</a>
                        <i class="material-icons">keyboard_arrow_down</i>
                        <div class='events-dropdown'>
                            <a href="./AllEvents.html">All Events</a>
                            <a href="./EventsbyMonth.html">Events by Month</a>
                        </div>
                    </li>
                    <li><a href="./Services.html">Services</a></li>
                    <li><a href="./People.html">Volunteers</a></li>
                </ul>
            </nav>
        </header>
        <div class="spacer">
            &nbsp;
        </div>
        <div>
            <nav>
                <ul class='breadcrumb'>
                    <li><a href='../index.html'></a> </li>
                    <li aria-current="page">Volunteers </li>
                    <li id="breadcrumb" aria-current="page"></li>
                </ul>
            </nav>
        </div>

        <!--Person name-->
        <div class="person-name">
            <h1 id="person_fullname">
            </h1>
        </div>

        <!--Person data-->
        <div class="person-data">
            <div class="person-data-left" > 
                <img id="person_photo" src="../assets//img/profile-man.jpg" class='person-data-img'>
            </div>
            <div class="person-data-middle">
                <span>
                    <h2>Birthday</h2>
                    <p>Yes</p>
        
                    <h2 >Motto</h2>
                    <p id="person_motto"></p>
                </span>
            </div>
            <div class="person-data-right">
                <span>
                    <h2>Phone</h2>
                    <p id="person_number"></p>
        
                    <h2>E-mail</h2>
                    <p id="person_email"></p>
                </span>
            </div>
        </div>

        <div class="spacer_medium">
            &nbsp;
        </div>
    
         <h1>Description</h1>
         <div class="spacer_small">
            &nbsp;
        </div>

        <p id="person_description"></p>
        
        <div class="spacer_medium">
            &nbsp;
        </div>



         <!--Events -->

         <h1>Events</h1>
         <p>The following events involve this volunteer</p>
         <div class="grid-container-related-events">
            <div id="event_0" class="grid-item" style="display: none;">
                <a id="event_link_0" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_0" src="../assets//img/white_img.jpg" class="card-img" alt="Event_1"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_0" class="card-title" style="background-color: transparent;">Such a cutie</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_1" class="grid-item" style="display: none;">
                <a id="event_link_1" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_1" src="../assets//img/white_img.jpg" class="card-img" alt="Event_2"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_1" class="card-title" style="background-color: transparent;">Marmots</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_2" class="grid-item" style="display: none;">
                <a id="event_link_2" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_2" src="../assets//img/white_img.jpg" class="card-img" alt="Event_3"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_2" class="card-title" style="background-color: transparent;">Ibex -> best name ever</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_3" class="grid-item" style="display: none;">
                <a id="event_link_3" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_3" src="../assets//img/white_img.jpg" class="card-img" alt="Event_4"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_3" class="card-title" style="background-color: transparent;">who doesn't want an ermine?</h5>
                        </div>
                    </div>
                </a>
            </div>
         </div>
         
 
 
         <!--Services-->
         
         <h1>Services</h1>
         <p>The following services involve this volunteer as coordinator</p>
 
         <div class="grid-container-related-events">
            <div id="service_0" class="grid-item" style="display: none;">
                <a id="service_link_0" href="./Service.html">
                    <div class="card bg-dark text-white">
                        <img id="service_img_0" src="../assets//img/white_img.jpg" class="card-img" alt="Service_1"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="service_desc_0" class="card-title" style="background-color: transparent;">Such a cutie</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="service_1" class="grid-item" style="display: none;">
                <a id="service_link_1" href="./Service.html">
                    <div class="card bg-dark text-white">
                        <img id="service_img_1" src="../assets//img/white_img.jpg" class="card-img" alt="Service_2"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="service_desc_1" class="card-title" style="background-color: transparent;">Marmots</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="service_2" class="grid-item" style="display: none;" class="grid-item">
                <a id="service_link_2" href="./Service.html">
                    <div class="card bg-dark text-white">
                        <img id="service_img_2" src="../assets//img/white_img.jpg" class="card-img" alt="Service_3"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="service_desc_2" class="card-title" style="background-color: transparent;">Ibex -> best name ever</h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="service_3" class="grid-item" style="display: none;"class="grid-item">
                <a id="service_link_3" href="./Service.html">
                    <div class="card bg-dark text-white">
                        <img id="service_img_3" src="../assets//img/white_img.jpg" class="card-img" alt="Service_4"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="service_desc_3" class="card-title" style="background-color: transparent;">who doesn't want an ermine?</h5>
                        </div>
                    </div>
                </a>
            </div>
          </div>


        <footer>
            <section class='footer-section'>
                <a href="#">Donate</a>
                <a href="./ContactForm.html" style="margin-left: -20px">Contact Form</a>
                <a href="./Faq.html">FAQ</a>
            </section>
            <div>
                <p class='social'>Social</p>
                <ul class="social-icons">
                    <li><a href="#" class="fa fa-facebook"></a></li>
                    <li><a href="#" class="fa fa-twitter"></a></li>
                    <li><a href="#" class="fa fa-instagram"></a></li>
                    <li><a href="#" class="fa fa-linkedin"></a></li>
                </ul>
            </div>
            <div class='copyright'>
                <p>Â© Copyright Wild Care All Rights Reserve</p>
                <p>Developers: Stefano Bagarin - Alessandra Pasini</p>
            </div>
        </footer>
                <!--Bootstrap jquery-->
                <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    </body>
    <script>
        fetch("../v1/volunteers/"  + localStorage["id_person"])
        .then(function(response) {
        if (!response.ok) 
            throw new Error("HTTP error, status = " + response.status);
        return response.json();
        })
        .then(function(json) {
            let {fullname, photo, motto,email, number, description} = json[0];

            document.getElementById("person_fullname").innerHTML = `${fullname}`;
            document.getElementById("breadcrumb").innerHTML = `${fullname}`;
            document.getElementById("person_motto").innerHTML = `${motto}`;
            document.getElementById("person_number").innerHTML = `${number}`;
            document.getElementById("person_email").innerHTML = `${email}`;
            document.getElementById("person_description").innerHTML = `${description}`;
            document.getElementById("person_photo").src = `${photo}`;

            var id_events = [];
            var id_services = [];
            for(var i = 0; i < json.length; i++){
                let{id_event, id_service} = json[i];
                if(! id_events.includes(`${id_event}`)){
                    id_events.push(`${id_event}`)
                }
                if(! id_services.includes(`${id_service}`)){
                    id_services.push(`${id_service}`)
                }
            }
            
            var flag_e = 1;
            var flag_s = 1;
            for (var i = 0; i < json.length; i++) {
                let {title, image, id_event,  id_service, s_title, sp_photo} = json[i];

                //populate people cards
                if(flag_s == 1 && `${id_service}` == "null"){
                    document.getElementById("service_desc_" + i).innerHTML = `${fullname}` + " is not related to any service at the moment";
                    document.getElementById("service_desc_" + i).style.color = "black";
                    document.getElementById("service_" + i).style.display = "block";
                    document.getElementById("service_link_" + i).href = "javascript:function() { return false; }"
                    flag_s = 0;
                }else{
                    if(flag_s == 1 && id_services.includes(`${id_service}`)){
                        document.getElementById("service_desc_" + i).innerHTML =  `${s_title}`;
                        document.getElementById("service_" + i).style.display = "block";
                        document.getElementById("service_img_" + i).src = `${sp_photo}`;
                        document.getElementById("service_link_" + i).onclick = function() 
                            {localStorage["id_service"] = `${id_service}`;};
                        id_services.splice(id_services.indexOf(`${id_service}`), 1);
                    }
                }
                
                //populate event cards
                if(flag_e == 1 && `${id_event}` == "null"){
                    document.getElementById("event_" + i).style.display = "block";
                    document.getElementById("event_desc_" + i).innerHTML =  `${fullname}` + " is not the coordinator of any event at the moment";
                    document.getElementById("event_desc_" + i).style.color = "black";
                    document.getElementById("event_link_" + i).href = "javascript:function() { return false; }"
                    flag_e = 0;
                }else {
                    if(flag_e == 1 && id_events.includes(`${id_event}`)){
                        document.getElementById("event_" + i).style.display = "block";
                        document.getElementById("event_desc_" + i).innerHTML =  `${title}`;
                        document.getElementById("event_img_" + i).src = `${image}`;
                        document.getElementById("event_link_" + i).onclick = function() 
                            {localStorage["id_event"] = `${id_event}`;};
                        id_events.splice(id_events.indexOf(`${id_event}`), 1);
                    }
                }
            }
        });
    </script>
</html>