<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Wild Care</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

        <!--Carousel-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        
        <!--Allow Carousel to move-->
        <link rel="stylesheet" type="text/css" href="https://kenwheeler.github.io/slick/slick/slick.css"/>
        <link rel="stylesheet" type="text/css" href="https://kenwheeler.github.io/slick/slick/slick-theme.css"/>
        
        <!--Style Sheet-->
        <link href="../assets/css/style.css" rel="stylesheet"/>

        <!--Icons Libraries-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <!--Font Link-->
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Top bar: this is our top landmark-->
        <header>
            <a href="../index.html">
                <img src="../assets/logo.png" class='nav-logo'>
            </a>
            <nav>
                <ul class='nav_links'>
                    <li><a href="./AboutUs.html">About Us</a></li>
                    <li class='dropdown'>
                        <a href="javascript:void(0)">Events</a>
                        <i class="material-icons">keyboard_arrow_down</i>
                        <div class='events-dropdown'>
                            <a href="./AllEvents.html">All Events</a>
                            <a href="./EventsbyMonth.html">Events by Month</a>
                        </div>
                    </li>
                    <li><a href="./Services.html">Services</a></li>
                    <li><a href="./People.html">Volunteers</a></li>
                </ul>
            </nav>
        </header>
        <div class="spacer">
            &nbsp;
        </div>
        <div >
            <nav>
                <ul class='breadcrumb'>
                    <li><a href='../index.html'></a> </li>
                    <li aria-current="page">Services </li>
                    <li id="breadcrumb" aria-current="page"></li>
                </ul>
            </nav>
        </div>

        <div class="title-group">
            <p id="service_title"></p>
        </div>

        
        <!-- <div class="spacer_medium">
            &nbsp;
        </div>
        <div class="spacer_medium">
            &nbsp;
        </div> -->
        
        <!--Carousel-->

        <!-- Slideshow container -->
        <div class="carousel-containera">
            <div class="carousel-itema">
                <!--<a class="carousel-prev" onclick="plusSlides(-1)">&#10094;</a>-->
                <img id="service_img_0" src="../assets/img/stambecchi.jpg" class="carousel-item-img">
                <!--
                <div class="carousel-item-text">Ermines</div>
                
                <a class="carousel-next" onclick="plusSlides(1)">&#10095;</a>-->
            </div>
  
            <div class="carousel-itema">
                <!--<a class="carousel-prev" onclick="plusSlides(-1)">&#10094;</a>-->
                <img id="service_img_1" src="../assets//img/owl_day.jpg" class="carousel-item-img">
                <!--
                <div class="carousel-item-text">Howl</div>
                
                <a class="carousel-next" onclick="plusSlides(1)">&#10095;</a>-->
            </div>
  
            <div class="carousel-itema">
                <!--<a class="carousel-prev" onclick="plusSlides(-1)">&#10094;</a>-->
                <img id="service_img_2" src="../assets//img/marmotte.jpg" class="carousel-item-img">
                <!--
                <div class="carousel-item-text">Marmots</div>
                
                <a class="carousel-next" onclick="plusSlides(1)">&#10095;</a>-->
            </div>
        </div>

        
        <br>
        <!-- The dots/circles-->
        <div style="text-align:center">
            <span class="carousel-dot" onclick="currentSlide(1)"></span>
            <span class="carousel-dot" onclick="currentSlide(2)"></span>
            <span class="carousel-dot" onclick="currentSlide(3)"></span>
        </div> 
        
        <!--Javascript-->
        <script src="../assets/js/script.js"></script>
        
        <div class="spacer_small">
            &nbsp;
        </div>

        <!--Text details-->
        <h1>Presentation</h1>
        
        <div class="spacer_small">
            &nbsp;
        </div>

        <p id="service_presentation">

        </p>

        <div class="spacer_medium">
            &nbsp;
        </div>
    
         <h1>Pratical info</h1>
         <div class="spacer_small">
            &nbsp;
        </div>

        <p id="service_pratical_info"></p>
        <!--
        <h2>When</h2>
         <p>Anytime</p>
         <div class="spacer_small">
            &nbsp;
        </div>
         <h2>Where</h2>
         <p>Somewhere</p>
        -->


         <div class="spacer_medium">
            &nbsp;
        </div>

         <!--Related volunteers-->
         <h2>Who is involved</h2>
         <p>The following volunteers are involved in this service</p>
         <div class="grid-container-involved-volunteers">
            <a id="person_0" href="./Person.html"  style="display: none;">
                <div class="grid-container-involved-volunteers-item">
                    <div class="grid-container-involved-volunteers-img" > 
                        <img id="person_img_0" src="../assets//img/profile-man.jpg" class='grid-item-img-volunteers'>
                    </div>
                    <div class="grid-container-involved-volunteers-text">
                        <span>
                            <h1 id="person_fullname_0"></h1>
                            <p id="person_motto_0"></p>
                        </span>
                    </div>
                </div>
            </a>
            <a id="person_1" href="./Person.html" style="display: none;">
                <div class="grid-container-involved-volunteers-item">
                    <div class="grid-container-involved-volunteers-img" > 
                        <img id="person_img_1" src="../assets//img/profile-woman.jpg" class='grid-item-img-volunteers'>

                    </div>
                    <div class="grid-container-involved-volunteers-text">
                        <span>
                            <h1 id="person_fullname_1"></h1>
                            <p id="person_motto_1"></p>
                        </span>
                    </div>
                </div>
            </a>
            <a id="person_2" href="./Person.html" style="display: none;">
                <div class="grid-container-involved-volunteers-item">
                    <div class="grid-container-involved-volunteers-img" > 
                        <img id="person_img_2" src="../assets//img/profile-man.jpg" class='grid-item-img-volunteers'>
                    </div>
                    <div class="grid-container-involved-volunteers-text">
                        <span>
                            <h1  id="person_fullname_2"></h1>
                            <p id="person_motto_2"></p>
                        </span>
                    </div>
                </div>
            </a>
         </div>

        <!--Related events-->
        <h2>Related events</h2>
        <p>The following events will provide this service</p>
        <div class="grid-container-related-events">
            <div id="event_0" class="grid-item" style="display: none;">
                <a id="event_link_0" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_0" src="../assets//img/owl_day.jpg" class="card-img" alt="Owls"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_0" class="card-title" style="background-color: transparent;"></h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_1" class="grid-item" style="display: none;">
                <a id="event_link_1" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_1" src="../assets//img/marmots_day.png" class="card-img" alt="Owls"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_1" class="card-title" style="background-color: transparent;"></h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_2" class="grid-item" style="display: none;">
                <a id="event_link_2" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_2" src="../assets//img/ibex_day.jpg" class="card-img" alt="Owls"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_2" class="card-title" style="background-color: transparent;"></h5>
                        </div>
                    </div>
                </a>
            </div>

            <div id="event_3" class="grid-item" style="display: none;">
                <a id="event_link_3" href="./Event.html">
                    <div class="card bg-dark text-white">
                        <img id="event_img_3" src="../assets//img/ermines_day.jpg" class="card-img" alt="Owls"> 
                        <div class="card-img-overlay" style="background-color: transparent;">
                            <h2 id="event_desc_3" class="card-title" style="background-color: transparent;"></h5>
                        </div>
                    </div>
                </a>
            </div>
         </div>

        <footer>
            <section class='footer-section'>
                <a href="#">Donate</a>
                <a href="./ContactForm.html" style="margin-left: -20px">Contact Form</a>
                <a href="./Faq.html">FAQ</a>
            </section>
            <div>
                <p class='social'>Social</p>
                <ul class="social-icons">
                    <li><a href="#" class="fa fa-facebook"></a></li>
                    <li><a href="#" class="fa fa-twitter"></a></li>
                    <li><a href="#" class="fa fa-instagram"></a></li>
                    <li><a href="#" class="fa fa-linkedin"></a></li>
                </ul>
            </div>
            <div class='copyright'>
                <p>© Copyright Wild Care All Rights Reserve</p>
                <p>Developers: Stefano Bagarin - Alessandra Pasini</p>
            </div>
        </footer>
        <!--Bootstrap jquery-->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    
    
        <!--Carousel slick scripts-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script type="text/javascript" src="https://kenwheeler.github.io/slick/slick/slick.min.js"></script>

    </body>

    <script>
        fetch("../v1/services/"  + localStorage["id_service"])
        .then(function(response) {
        if (!response.ok) 
            throw new Error("HTTP error, status = " + response.status);
        return response.json();
        })
        .then(function(json) {
            let {s_title, presentation, pratical_info} = json[0];

            document.getElementById("service_title").innerHTML = `${s_title}`;
            document.getElementById("breadcrumb").innerHTML = `${s_title}`;
            document.getElementById("service_presentation").innerHTML = `${presentation}`;
            document.getElementById("service_pratical_info").innerHTML = `${pratical_info}`;

            var id_events = [];
            var id_people = [];
            var id_service_photoes = [];
            for(var i = 0; i < json.length; i++){
                let{id_event, id_person, id_service_photo} = json[i];
                if(! id_events.includes(`${id_event}`)){
                    id_events.push(`${id_event}`)
                }
                if(! id_people.includes(`${id_person}`)){
                    id_people.push(`${id_person}`)
                }
                if(! id_service_photoes.includes(`${id_service_photo}`)){
                    id_service_photoes.push(`${id_service_photo}`)
                }
            }

            setSlides(id_service_photoes.length);
            
            for (var i = 0; i < json.length; i++) {
                let {title, image, id_event, fullname, photo, motto, id_person, id_service_photo, sp_photo} = json[i];

                //populate image carousel
                if(id_service_photoes.includes(`${id_service_photo}`)){
                    document.getElementById("service_img_" + i).src = `${sp_photo}`;
                    id_service_photoes.splice(id_service_photoes.indexOf(`${id_service_photo}`), 1);
                }

                //populate people cards
                if(id_people.includes(`${id_person}`)){
                    document.getElementById("person_fullname_" + i).innerHTML =  `${fullname}`;
                    document.getElementById("person_motto_" + i).innerHTML =  `${motto}`;
                    document.getElementById("person_" + i).style.display = "block";
                    document.getElementById("person_img_" + i).src = `${photo}`;
                    document.getElementById("person_" + i).onclick = function() 
                        {localStorage["id_person"] = `${id_person}`;};
                    id_people.splice(id_people.indexOf(`${id_person}`), 1);
                }

                //populate event cards
                if(id_events.includes(`${id_event}`)){
                    document.getElementById("event_" + i).style.display = "block";
                    document.getElementById("event_desc_" + i).innerHTML =  `${title}`;
                    document.getElementById("event_img_" + i).src = `${image}`;
                    document.getElementById("event_link_" + i).onclick = function() 
                        {localStorage["id_event"] = `${id_event}`;};
                    id_events.splice(id_events.indexOf(`${id_event}`), 1);
                }

            }
        });
    </script>
</html>